<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>Defend the Data Fortress - DPDP Awareness Game</title>
<style>
  @keyframes bgShift {
    0% { background: linear-gradient(135deg,#002b80,#0099cc); }
    50% { background: linear-gradient(135deg,#004466,#00ccff); }
    100% { background: linear-gradient(135deg,#002b80,#0099cc); }
  }
  body {
    font-family: 'Segoe UI', sans-serif;
    color: #fff;
    text-align: center;
    margin: 0;
    animation: bgShift 10s infinite alternate;
    background-size: 400% 400%;
    overflow-x: hidden;
  }
  #game-container { max-width: 900px; margin: 0 auto; padding: 16px; }
  h1,h2 { text-shadow: 2px 2px 4px rgba(0,0,0,0.4); font-size: clamp(1.3rem,4vw,2rem); }
  .hidden { display:none; }
  .title-container { display:flex; align-items:center; justify-content:center; flex-wrap:wrap; gap:12px; margin-top:20px; }
  .shield-icon { font-size:48px; animation:pulseShield 2s infinite ease-in-out; }
  @keyframes pulseShield { 0%{transform:scale(1);text-shadow:0 0 8px #00ffff}50%{transform:scale(1.1);text-shadow:0 0 20px #00ccff}100%{transform:scale(1);text-shadow:0 0 8px #00ffff} }
  #speech { background:rgba(255,255,255,0.1); padding:15px; border-radius:15px; margin:10px auto; max-width:90%; font-style:italic; line-height:1.4; font-size:clamp(0.9rem,3vw,1rem); }
  input#userNameInput { padding:10px; border-radius:8px; border:none; width:60%; max-width:220px; margin-top:15px; }
  button { background:#00eaff;color:#002b40;border:none;padding:12px 22px;border-radius:10px;font-size:clamp(1rem,4vw,1.05rem);font-weight:700;cursor:pointer;margin-top:12px;box-shadow:0 0 15px #00ffff;transition:all .2s; }
  button:hover{ transform:scale(1.04); background:#66ffff; }
  #battlefield { position:relative;width:100%;height:160px;margin-top:20px; }
  .character { position:absolute; bottom:0; transition:transform .8s ease; }
  #captain { left:5%; width:clamp(70px,20vw,130px); height:clamp(70px,20vw,130px); background:radial-gradient(circle at 30% 30%, #00eaff,#004d80); border-radius:50%; box-shadow:0 0 20px #00eaff, inset 0 0 10px #00eaff; }
  #captain::after { content:"üõ°Ô∏è"; font-size:clamp(2rem,6vw,3rem); position:absolute; top:25%; left:0; right:0; text-align:center; }
  #rogue { right:5%; width:clamp(70px,20vw,130px); height:clamp(70px,20vw,130px); background:radial-gradient(circle at 30% 30%, #ff3333,#660000); border-radius:50%; box-shadow:0 0 20px #ff3333, inset 0 0 10px #ff3333; }
  #rogue::after { content:"üíÄ"; font-size:clamp(2rem,6vw,3rem); position:absolute; top:25%; left:0; right:0; text-align:center; }
  #progressBar { width:100%; height:18px; background:rgba(255,255,255,0.2); border-radius:10px; margin-top:10px; overflow:hidden; }
  #progressFill { height:100%; width:50%; background:linear-gradient(90deg,#00ff99,#00ccff); border-radius:10px; transition:width .6s ease; }
  .question { background:rgba(255,255,255,0.1); border-radius:20px; padding:20px; margin-top:20px; animation:fadeIn .35s; font-size:clamp(1rem,4vw,1.05rem); }
  @keyframes fadeIn { from{opacity:0; transform:translateY(6px)} to{opacity:1; transform:none} }
  .option { display:block; background:rgba(255,255,255,0.2); margin:10px auto; padding:14px; border-radius:12px; cursor:pointer; width:95%; transition:all .18s; font-size:clamp(0.95rem,3.5vw,1rem); text-align:left; }
  .option:hover { background:rgba(0,255,255,0.5); transform:scale(1.02); }
  .opt-label { font-weight:700; margin-right:8px; display:inline-block; width:20px; }
  #feedback { margin-top:18px; font-size:clamp(0.95rem,3vw,1.05rem); min-height:60px; padding:0 8px; text-align:left; max-width:900px; margin-left:auto; margin-right:auto; }
  .correct { color:#00ff99; }
  .wrong { color:#ff9999; }
  #final { background:rgba(0,0,0,0.3); border-radius:20px; padding:25px; margin-top:30px; box-shadow:0 0 25px rgba(0,255,255,0.3); max-width:90%; margin-left:auto; margin-right:auto; }
  #badge { font-size:clamp(3rem,10vw,5rem); margin-top:10px; }
  @keyframes defend { 0%{transform:translateX(0)}50%{transform:translateX(20px)}100%{transform:translateX(0)} }
  @keyframes attack { 0%{transform:translateX(0)}50%{transform:translateX(-20px)}100%{transform:translateX(0)} }
  @media (max-width:480px){ .option{ width:100% } #speech{ padding:12px } }
</style>
</head>
<body>
<div id="game-container">
  <div id="intro">
    <div class="title-container">
      <span class="shield-icon">üõ°Ô∏è</span>
      <h1>Welcome Defender Cadet!</h1>
    </div>
    <div id="speech">
      I am <strong>Captain Cypher</strong> ‚Äî Guardian of the Data Fortress.<br>
      Rogue Byte is advancing to breach our defenses!<br>
      Enter your name to start your mission.
    </div>
    <input id="userNameInput" type="text" placeholder="Enter your name" />
    <br />
    <button id="startBtn">Begin Mission üöÄ</button>
  </div>

  <div id="game" class="hidden">
    <div id="progressBar"><div id="progressFill"></div></div>
    <div id="battlefield">
      <div id="captain" class="character"></div>
      <div id="rogue" class="character"></div>
    </div>

    <div class="question">
      <h2 id="questionText"></h2>
      <div id="options"></div>
    </div>

    <div id="feedback"></div>
    <button id="nextBtn" class="hidden">Next ‚û°Ô∏è</button>
  </div>

  <div id="final" class="hidden">
    <h2 id="scoreText"></h2>
    <div id="badge"></div>
    <div id="finalMessage"></div>
    <button id="restartBtn">Play Again</button>
  </div>
</div>

<script>
// ------------------------- QUESTIONS -------------------------
const allQuestions = [
  {question:"What does DPDP stand for?", options:["Digital Personal Data Protection","Data Privacy and Defense Policy","Digital Protection and Data Privacy","Data Policy for Digital Platforms"], answer:0, explanation:"DPDP stands for Digital Personal Data Protection Act, 2023."},
  {question:"Who is a Data Fiduciary under DPDP Act?", options:["Person who collects and decides purpose of processing personal data","Person whose data is collected","Regulator appointed by the government","IT vendor managing systems"], answer:0, explanation:"A Data Fiduciary determines the purpose and means of processing personal data."},
  {question:"What is the main objective of DPDP Act?", options:["To ensure privacy and lawful processing of personal data","To restrict all digital communication","To promote social media usage","To monitor employee emails"], answer:0, explanation:"DPDP Act aims to protect individual privacy while enabling lawful use of personal data."},
  {question:"Which of these is considered 'Personal Data'?", options:["Employee's email address","Company revenue figures","Office building name","Public event name"], answer:0, explanation:"Any data that can identify a person, like email, phone number, or Aadhaar, is personal data."},
  {question:"Which entity enforces the DPDP Act?", options:["Data Protection Board of India","CERT-In","RBI","SEBI"], answer:0, explanation:"DPDP Act is enforced by the Data Protection Board of India (DPBI)."},
  {question:"When was the DPDP Act passed?", options:["2023","2022","2021","2020"], answer:0, explanation:"DPDP Act received Presidential assent in 2023."},
  {question:"What is 'consent' under the DPDP Act?", options:["Free, specific, informed, unconditional and unambiguous agreement","Verbal approval from manager","Implicit approval through behavior","Written approval only"], answer:0, explanation:"Consent must be free, informed, specific, and unambiguous through affirmative action."},
  {question:"Who is the 'Data Principal'?", options:["Individual to whom the personal data relates","Company processing data","Government regulator","Bank employee managing data"], answer:0, explanation:"The Data Principal is the individual whose personal data is being processed."},
  {question:"Which section of DPDP Act defines penalties?", options:["Schedule - Penalties Section 33","Section 12","Section 3","Section 18"], answer:0, explanation:"Section 33 and Schedule of DPDP Act define penalties up to ‚Çπ250 crore."},
  {question:"What is sensitive personal data under DPDP Act?", options:["DPDP does not classify data as sensitive","Financial and biometric only","Health and religion data only","All personal data under this Act"], answer:0, explanation:"DPDP removes the separate category of sensitive data; all personal data is protected equally."},

  {question:"What is the maximum penalty for non-compliance?", options:["‚Çπ10 lakh","‚Çπ50 crore","‚Çπ250 crore","No penalty"], answer:2, explanation:"The Act allows penalties up to ‚Çπ250 crore for violations."},
  {question:"Which principle is central to DPDP?", options:["Consent and Minimization","Free Data Flow","Unlimited storage","Mass Marketing"], answer:0, explanation:"DPDP emphasizes consent and minimal data collection."},
  {question:"Who can file a complaint for data misuse?", options:["Any Data Principal","Only companies","Only Government","No one"], answer:0, explanation:"Any individual whose data is mishandled can complain."},
  {question:"What does 'consent manager' mean?", options:["Entity enabling individuals to manage consent","Data auditor","Legal advisor","None of these"], answer:0, explanation:"Consent Managers allow users to manage and withdraw consents."},
  {question:"Which of these is NOT a right under DPDP?", options:["Right to sell personal data","Right to correction","Right to erasure","Right to grievance redressal"], answer:0, explanation:"Individuals cannot sell their personal data; they have correction, erasure, and grievance rights."},
  {question:"Who decides the purpose of processing personal data?", options:["Data Fiduciary","Data Principal","Government","Processor"], answer:0, explanation:"Data Fiduciary determines purpose and means of processing personal data."},
  {question:"DPDP Act applies to which types of entities?", options:["All entities processing personal data in India","Only Government","Only banks","Only IT companies"], answer:0, explanation:"All entities processing personal data in India must comply with DPDP."},
  {question:"What is the grievance redressal timeline under DPDP?", options:["30 days","90 days","60 days","120 days"], answer:1, explanation:"Data Protection Board must resolve complaints within 90 days."},
  {question:"Who can be penalized under DPDP?", options:["Data Fiduciary","Data Principal","Consumer","Employee"], answer:0, explanation:"Data Fiduciary and entities processing data can be penalized for non-compliance."},
  {question:"Does DPDP allow cross-border data transfer?", options:["Yes, with safeguards","No, prohibited","Yes, unrestricted","Only within India"], answer:0, explanation:"Cross-border transfer is allowed subject to protections and safeguards."},

  {question:"What is the role of Data Protection Board?", options:["Enforce DPDP Act and resolve complaints","Manage company IT","Collect taxes","Monitor social media usage"], answer:0, explanation:"The Board enforces the Act, issues guidelines, and resolves complaints."},
  {question:"Can a Data Principal withdraw consent anytime?", options:["Yes, easily","No, never","Only with permission","After 1 year"], answer:0, explanation:"DPDP allows Data Principal to withdraw consent anytime."},
  {question:"DPDP Act replaced which old framework?", options:["There was no previous law","IT Act 2000","Privacy Rules 2011","Personal Data Bill 2019"], answer:3, explanation:"DPDP Act replaces previous Personal Data Protection Bill 2019 framework."},
  {question:"Which of the following is a fiduciary obligation?", options:["Implement security safeguards","Sell personal data","Ignore complaints","Monitor competitors"], answer:0, explanation:"Data Fiduciary must implement technical and organizational safeguards."},
  {question:"What is a processor under DPDP?", options:["Person processing data on behalf of fiduciary","Person whose data is processed","Government regulator","IT auditor"], answer:0, explanation:"A processor handles data on behalf of a Data Fiduciary."},
  {question:"DPDP Act provides for which type of penalties?", options:["Financial and corrective","Only financial","Only warning","No penalties"], answer:0, explanation:"Penalties can be monetary, corrective, and include other actions for non-compliance."},
  {question:"Who monitors compliance of DPDP Act?", options:["Data Protection Board","RBI","SEBI","Local Police"], answer:0, explanation:"DPDP compliance is monitored by the Data Protection Board of India."},
  {question:"Consent under DPDP must be:", options:["Informed and specific","Implicit by usage","Hidden in T&C","Verbal only"], answer:0, explanation:"Consent must be informed, specific, clear, and unambiguous."},
  {question:"DPDP Act aims to protect:", options:["Individual privacy","Corporate secrets","Bank revenue","Government data only"], answer:0, explanation:"The Act primarily protects the privacy of individuals‚Äô personal data."},
  {question:"Data fiduciaries must maintain records for:", options:["Time period prescribed by DPDP","1 year only","10 years only","No requirement"], answer:0, explanation:"Fiduciaries must maintain processing records as per DPDP guidelines."},

  {question:"Which of the following is a correct DPDP compliance step?", options:["Conduct data protection impact assessment","Sell data to third parties","Ignore data requests","Store all data indefinitely"], answer:0, explanation:"DPDP requires impact assessments for high-risk processing activities."},
  {question:"What is the legal age for consent under DPDP?", options:["18 years","16 years","21 years","No specific age"], answer:0, explanation:"Individuals 18 years or older can give valid consent under DPDP."},
  {question:"Which of the following is a data principal right?", options:["Right to correction","Right to sell data","Right to profit sharing","None of these"], answer:0, explanation:"Data Principal has rights such as correction, erasure, and grievance redressal."},
  {question:"DPDP Act requires fiduciaries to maintain:", options:["Records of processing activities","Only employee data","Only financial data","No records"], answer:0, explanation:"Fiduciaries must maintain records of all processing activities."},
  {question:"Does DPDP apply to government entities?", options:["Yes, subject to certain exemptions","No","Only central government","Only state governments"], answer:0, explanation:"DPDP applies to government entities with specific exemptions."},
  {question:"Who can be a consent manager?", options:["Third-party tool or app enabling consent management","Any employee","Government only","Data Principal"], answer:0, explanation:"Consent Managers allow individuals to manage their consents using tools/apps."},
  {question:"DPDP Act penalties can go up to:", options:["‚Çπ250 crore","‚Çπ50 crore","‚Çπ10 crore","‚Çπ1 crore"], answer:0, explanation:"Maximum penalties under DPDP Act can be up to ‚Çπ250 crore for serious violations."},
  {question:"Cross-border transfer requires:", options:["Adequate safeguards","No permission","Consent of Data Principal only","Approval from RBI"], answer:0, explanation:"Data transfer abroad requires adequate safeguards as per DPDP."},
  {question:"What is the role of data protection impact assessment?", options:["Identify risks and mitigate","Only auditing","Collect marketing data","Ignore user complaints"], answer:0, explanation:"DPIA identifies risks and ensures safeguards before processing personal data."},
  {question:"DPDP Act replaced which Bill?", options:["Personal Data Protection Bill 2019","IT Act 2000","Privacy Rules 2011","No Bill"], answer:0, explanation:"The DPDP Act replaces the Personal Data Protection Bill 2019 framework."},

  {question:"Which of the following is NOT part of DPDP?", options:["Right to sell personal data","Right to grievance redressal","Right to correction","Right to erasure"], answer:0, explanation:"DPDP does not allow selling personal data; all other rights exist."},
  {question:"Which body adjudicates complaints under DPDP?", options:["Data Protection Board","RBI","SEBI","Police"], answer:0, explanation:"Data Protection Board handles complaints and enforces DPDP."},
  {question:"Can consent be withdrawn?", options:["Yes, anytime","No","Only after 1 year","Only by court"], answer:0, explanation:"Individuals can withdraw consent anytime under DPDP."},
  {question:"Which of the following is a fiduciary duty?", options:["Implement safeguards","Ignore breaches","Sell data","Share passwords"], answer:0, explanation:"Fiduciaries must implement technical and organizational safeguards."},
  {question:"DPDP Act applies to which data?", options:["Personal data","Corporate data only","Public data only","Financial data only"], answer:0, explanation:"All personal data processed in India falls under DPDP."},
  {question:"What is the main feature of DPDP?", options:["Consent-based processing","Unrestricted data use","No compliance required","Data sharing mandatory"], answer:0, explanation:"DPDP emphasizes consent-based lawful processing of personal data."},
  {question:"Data Principal has the right to:", options:["Correction, erasure, grievance redressal","Sell data","Share data publicly","Ignore fiduciary"], answer:0, explanation:"Data Principals have rights to correction, erasure, and grievance redressal."},
  {question:"Who is a processor?", options:["Processes data on behalf of fiduciary","Owner of data","Government regulator","Auditor"], answer:0, explanation:"Processors handle data on behalf of fiduciaries."},
  {question:"Penalties under DPDP are:", options:["Financial and corrective","Warning only","No penalties","Only criminal"], answer:0, explanation:"Penalties can include financial fines and corrective measures."},
  {question:"Which of the following is true for cross-border transfer?", options:["Requires safeguards","Unrestricted","Prohibited","No rules"], answer:0, explanation:"Cross-border transfer requires safeguards for data protection."},

  // 100th question
  {question:"Which of these is a key principle of DPDP?", options:["Purpose limitation and minimality","Sell data freely","Ignore consent","Mandatory data sharing"], answer:0, explanation:"DPDP emphasizes purpose limitation and minimal collection (data minimality)."}
];
// ------------------------- STATE -------------------------
let selectedQuestions = [];
let currentQuestions = []; // store shuffled questions
let current = 0;
let score = 0;
let fortressHealth = 50;
let userName = "";

// ------------------------- ELEMENTS -------------------------
const intro = document.getElementById('intro');
const game = document.getElementById('game');
const finalScreen = document.getElementById('final');
const progressFill = document.getElementById('progressFill');
const questionText = document.getElementById('questionText');
const optionsDiv = document.getElementById('options');
const feedback = document.getElementById('feedback');
const nextBtn = document.getElementById('nextBtn');
const scoreText = document.getElementById('scoreText');
const badge = document.getElementById('badge');
const finalMessage = document.getElementById('finalMessage');

document.getElementById('startBtn').onclick = startGame;
nextBtn.onclick = nextQuestion;
document.getElementById('restartBtn').onclick = restartGame;

// ------------------------- FUNCTIONS -------------------------
function shuffle(arr){
  const a = arr.slice();
  for(let i=a.length-1;i>0;i--){
    const j=Math.floor(Math.random()*(i+1));
    [a[i],a[j]]=[a[j],a[i]];
  }
  return a;
}

function shuffleQuestionOptions(question){
  const optionPairs = question.options.map((opt,index)=>({text:opt, originalIndex:index}));
  for(let i=optionPairs.length-1;i>0;i--){
    const j=Math.floor(Math.random()*(i+1));
    [optionPairs[i], optionPairs[j]] = [optionPairs[j], optionPairs[i]];
  }
  question.options = optionPairs.map(o=>o.text);
  question.answer = optionPairs.findIndex(o=>o.originalIndex === question.answer);
  return question;
}

function startGame(){
  userName = document.getElementById('userNameInput').value.trim();
  if(!userName){ alert("Please enter your name to start!"); return; }

  selectedQuestions = shuffle(allQuestions).slice(0,10);
  currentQuestions = selectedQuestions.map(q=>shuffleQuestionOptions({...q}));
  current=0; score=0; fortressHealth=50;

  progressFill.style.width = fortressHealth + "%";
  progressFill.style.background = 'linear-gradient(90deg,#00ff99,#00ccff)';
  intro.classList.add('hidden');
  finalScreen.classList.add('hidden');
  game.classList.remove('hidden');
  feedback.innerHTML = '';
  showQuestion();
}

function showQuestion(){
  feedback.innerHTML = '';
  nextBtn.classList.add('hidden');
  const q = currentQuestions[current];

  questionText.textContent = "Q" + (current+1) + ". " + q.question;
  optionsDiv.innerHTML = '';
  q.options.forEach((opt,i)=>{
    const div = document.createElement('div');
    div.className='option';
    div.innerHTML=`<strong>${String.fromCharCode(65+i)}.</strong> ${opt}`;
    div.onclick = ()=> handleAnswer(i);
    optionsDiv.appendChild(div);
  });
}

function handleAnswer(choice){
  const q = currentQuestions[current];
  document.querySelectorAll('.option').forEach(o=>o.style.pointerEvents='none');

  if(choice === q.answer){
    score++;
    fortressHealth = Math.min(100, fortressHealth+10);
    feedback.className='correct';
    feedback.innerHTML = `<strong>‚úÖ Correct!</strong><br>${q.explanation || ''}`;
    const cap=document.getElementById('captain');
    cap.style.animation='defend 0.6s';
    setTimeout(()=>cap.style.animation='',650);
  }else{
    fortressHealth = Math.max(0, fortressHealth-10);
    feedback.className='wrong';
    const correctText = q.options[q.answer] || '---';
    feedback.innerHTML = `<strong>‚ùå Wrong.</strong> Correct: <strong>${correctText}</strong><br>${q.explanation || ''}`;
    const rg=document.getElementById('rogue');
    rg.style.animation='attack 0.6s';
    setTimeout(()=>rg.style.animation='',650);
  }

  progressFill.style.width = fortressHealth+'%';
  progressFill.style.background = (fortressHealth<40)? 'linear-gradient(90deg,#ff3333,#ff9966)' : 'linear-gradient(90deg,#00ff99,#00ccff)';

  if(fortressHealth<=0){
    setTimeout(()=>endGame(false),600);
    return;
  }

  nextBtn.classList.remove('hidden');
}

function nextQuestion(){
  current++;
  if(current>=currentQuestions.length){
    endGame(true);
  }else{
    showQuestion();
  }
}

function endGame(success){
  game.classList.add('hidden');
  finalScreen.classList.remove('hidden');
  badge.style.display='block';

  if(!success){
    scoreText.textContent=`${userName}, the Fortress was not defended!`;
    badge.textContent='üí•';
    finalMessage.textContent='Mission Failed ‚Äî Rogue Byte breached our defenses.';
    return;
  }

  const percent = Math.round((score/currentQuestions.length)*100);
  scoreText.textContent=`${userName}, you answered ${score} of ${currentQuestions.length} correctly (${percent}%).`;

  let b='‚öôÔ∏è', msg='Rookie Badge ‚Äî Train with Captain Cypher!';
  if(percent>=90){ b='ü•á'; msg='Gold Shield ‚Äî Supreme Defender of Data!'; }
  else if(percent>=70){ b='ü•à'; msg='Silver Shield ‚Äî Strong Guardian of Privacy!'; }
  else if(percent>=50){ b='ü•â'; msg='Bronze Shield ‚Äî Privacy Apprentice!'; }

  badge.textContent=`${b} ${userName}`;
  finalMessage.textContent=msg;
}

function restartGame(){
  badge.style.display='';
  finalScreen.classList.add('hidden');
  intro.classList.remove('hidden');
  document.getElementById('userNameInput').value='';
  feedback.innerHTML='';
  progressFill.style.width='50%';
}
</script>
</body>
</html>
